<!doctype html>
<html lang="en"> 
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Indie Film — Zine Theater</title>
  <style>
/* --- RESET --- */
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
  height: 100%;
  font-family: 'Courier New', monospace;
}

/* --- THEATER BACKGROUND --- */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, rgba(20,20,40,0.6) 0%, rgba(0,0,0,1) 70%),
              url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="2" height="2"><circle cx="1" cy="1" r="1" fill="white"/></svg>');
  background-size: cover, 2px 2px;
  animation: starBlink 4s infinite alternate ease-in-out;
  z-index: -1;
}

@keyframes starBlink {
  0% { opacity: 0.6; }
  100% { opacity: 0.9; }
}

/* --- CURTAINS (actual sliding panels) --- */
#curtain-left, #curtain-right {
  position: fixed;
  top: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(to bottom, #2e0249, #4b0082 40%, #000 100%);
  box-shadow: inset 0 0 40px rgba(0,0,0,0.8);
  z-index: 5;
  transition: transform 2.2s ease-in-out;
}
#curtain-left { left: 0; transform: translateX(0); }
#curtain-right { right: 0; transform: translateX(0); }

.curtain-open-left { transform: translateX(-100%); }
.curtain-open-right { transform: translateX(100%); }

/* --- LOADER & TITLE CARD --- */
#loader {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 1.2rem;
  text-align: center;
  z-index: 10;
}

#progress-bar {
  width: 240px;
  height: 8px;
  background: rgba(255,255,255,0.2);
  border-radius: 4px;
  overflow: hidden;
  margin-top: 10px;
}
#progress-fill {
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, #00c6ff, #7f00ff);
  transition: width 0.2s linear;
}

#title-card {
  opacity: 0;
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(1.2);
  color: neonyellow;
  padding: 20px 40px;
  background: rgba(255,255,255,0.05);
  border: 2px dashed #fff;
  text-shadow: 0 0 8px #fff;
  filter: contrast(180%) brightness(120%) grayscale(40%);
  font-size: 2rem;
  letter-spacing: 2px;
  z-index: 9;
  transition: opacity 1s ease, transform 1s ease;
}

#title-card.visible {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* --- VIDEO SCREEN --- */
#film-container {
  opacity: 0;
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  max-width: 900px;
  box-shadow: 0 0 45px rgba(0,0,0,0.9);
  border: 4px solid rgba(255,255,255,0.1);
  transition: opacity 1.2s ease;
  z-index: 8;
}

#film-container.visible {
  opacity: 1;
}
</style>
</head>
<body>
  <div class="stage">
    <div class="starfield" id="starfield"></div>
    <div class="glow"></div>
    <div id="curtainL" class="curtain"></div>
    <div id="curtainR" class="curtain"></div>

    <div class="theater">
      <div class="badge">indie · punk zine</div>
      <div class="screen-wrap">
        <div class="screen">
          <video id="filmVideo" preload="auto" playsinline webkit-playsinline>
            <source src="Chimera-Movie.mp4" type="video/mp4" />
          </video>
          <div class="grain flicker"></div>
        </div>
      </div>

      <div class="title-card" id="titleCard">Chimera — A Short Film</div>

      <div class="loader" id="loader">
        <div class="loading-text">Loading Feature...</div>
        <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
        <div class="timer" id="timer">0%</div>
      </div>

      <div class="credit">— Feature presentation —</div>
    </div>
  </div>

  <script>
    const video = document.getElementById('filmVideo');
    const progressBar = document.getElementById('progressBar');
    const timerText = document.getElementById('timer');
    const loader = document.getElementById('loader');
    const curtainL = document.getElementById('curtainL');
    const curtainR = document.getElementById('curtainR');
    const titleCard = document.getElementById('titleCard');
    const STAR_COUNT = 140;

    const starfield = document.getElementById('starfield');
    for(let i=0;i<STAR_COUNT;i++){
      const s=document.createElement('div');
      s.className='star';
      s.style.top=Math.random()*100+'%';
      s.style.left=Math.random()*100+'%';
      s.style.animation=`twinkle ${Math.random()*4+2}s ${Math.random()*2}s infinite`;
      starfield.appendChild(s);
    }

    video.muted=true;

    function startSequence(){
      const duration = 6500;
      const start = performance.now();

      function tick(now){
        const pct=Math.min(1,(now-start)/duration);
        const percent=Math.round(pct*100);
        progressBar.style.width=percent+'%';
        timerText.textContent=percent+'%';

        if(pct<1){requestAnimationFrame(tick);} else {
          loader.style.opacity=0;
          setTimeout(()=>loader.style.display='none',400);

          curtainL.classList.add('curtain-open-L');
          curtainR.classList.add('curtain-open-R');

          setTimeout(()=>{
            titleCard.classList.add('title-show');
          },900);

          setTimeout(()=>{
            titleCard.style.opacity=0;
          },3000);

          setTimeout(()=>{
            playFilm();
          },3800);
        }
      }
      requestAnimationFrame(tick);
    }

    function playFilm(){
      video.play();
    }

    document.addEventListener('DOMContentLoaded',()=>{
      setTimeout(startSequence,300);
    });
  </script>
</body>
</html>
