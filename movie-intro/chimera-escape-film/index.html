<!doctype html>
<html lang="en"> 
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Indie Film — Zine Theater</title>
  <style>
html, body { margin:0; padding:0; background:#000; overflow:hidden; height:100%; font-family:'Courier New', monospace; }
body::before { content:""; position:fixed; inset:0; background: radial-gradient(circle at center, rgba(20,20,40,0.6) 0%, rgba(0,0,0,1) 70%), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="2" height="2"><circle cx="1" cy="1" r="1" fill="white"/></svg>'); background-size: cover, 2px 2px; animation: starBlink 4s infinite alternate ease-in-out; z-index: -1; }
@keyframes starBlink {0% { opacity: 0.6; }100% { opacity: 0.9; }}
#loader { position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; color:#fff; z-index:10; }
#progress-bar { width:240px; height:8px; background: rgba(255,255,255,0.2); border-radius:4px; overflow:hidden; margin-top:10px; }
#progress-fill { width:0%; height:100%; background: linear-gradient(90deg, #00c6ff, #7f00ff); transition: width 0.2s linear; }
#film-container { opacity:0; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:80%; max-width:900px; box-shadow:0 0 45px rgba(0,0,0,0.9); border:4px solid rgba(255,255,255,0.1); transition: opacity 1.2s ease; z-index:8; }
#film-container.visible { opacity:1; }
</style>
</head>
<body>
  <div class="stage">
    <div class="starfield" id="starfield"></div>

    <div class="theater">
      <div class="badge">indie · punk zine</div>
      <div class="screen-wrap">
        <div class="screen" id="film-container">
          <video id="filmVideo" preload="auto" playsinline webkit-playsinline>
            <source src="chimera-epic-preview.mp4" type="video/mp4" />
          </video>
          <div class="grain flicker"></div>
        </div>
      </div>
      <div class="loader" id="loader">
        <div class="loading-text">Loading Feature...</div>
        <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
        <div class="timer" id="timer">0%</div>
      </div>
      <div class="credit">— Feature presentation —</div>
    </div>
  </div>

  <script>
    const video = document.getElementById('filmVideo');
    const progressBar = document.getElementById('progressBar');
    const timerText = document.getElementById('timer');
    const loader = document.getElementById('loader');
    const filmContainer = document.getElementById('film-container');
    const STAR_COUNT = 140;

    const starfield = document.getElementById('starfield');
    for(let i=0;i<STAR_COUNT;i++){
      const s=document.createElement('div');
      s.className='star';
      s.style.top=Math.random()*100+'%';
      s.style.left=Math.random()*100+'%';
      s.style.animation=`twinkle ${Math.random()*4+2}s ${Math.random()*2}s infinite`;
      starfield.appendChild(s);
    }

    video.muted=true;

    function startSequence(){
      const duration = 6500;
      const start = performance.now();

      function tick(now){
        const pct=Math.min(1,(now-start)/duration);
        const percent=Math.round(pct*100);
        progressBar.style.width=percent+'%';
        timerText.textContent=percent+'%';

        if(pct<1){requestAnimationFrame(tick);} else {
          loader.style.opacity=0;
          setTimeout(()=>loader.style.display='none',400);
          filmContainer.classList.add('visible');
          playFilm();
        }
      }
      requestAnimationFrame(tick);
    }

    function playFilm(){
      // Fix: use catch() to prevent errors when play() doesn't return a promise
      const playPromise = video.play();
      if(playPromise !== undefined){
        playPromise.catch(()=>{});
      }
    }

    document.addEventListener('DOMContentLoaded',()=>{
      setTimeout(startSequence,300);
    });
  </script>
</body>
</html>
